{"version":3,"file":"chartist-0.1.1.bar.min.js","sources":["../source/scripts/chartist.bar.js"],"names":["document","window","Chartist","undefined","Bar","query","data","options","responsiveOptions","createChart","xAxisOffset","yAxisOffset","bounds","seriesGroups","paper","createPaper","width","height","getBounds","dataArray","axisX","offset","showLabel","calculateLabelOffset","labels","classNames","label","horizontal","join","labelInterpolationFnc","getHeight","axisY","values","getWidth","chartRect","createChartRect","g","grid","createXAxis","createYAxis","i","series","length","biPol","periodHalfWidth","node","setAttribute","className","alphaNumerate","j","bar","p","projectPoint","x","seriesBarDistance","line","y1","y","barClasses","prepend","add","currentOptions","defaultOptions","showGrid","noop","labelAlign","scaleMinSpace","chartPadding","thin","thick","vertical","normalizeDataArray","getDataArray","optionsProvider","changedOptions","addEventListener","version","update"],"mappings":"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","sourcesContent":["// Chartist Bar chart\n(function (document, window, Chartist, undefined) {\n  'use strict';\n  Chartist.Bar = Chartist.Bar || function (query, data, options, responsiveOptions) {\n\n    var defaultOptions = {\n        axisX: {\n          offset: 10,\n          showLabel: true,\n          showGrid: true,\n          labelInterpolationFnc: Chartist.noop\n        },\n        axisY: {\n          offset: 15,\n          showLabel: true,\n          showGrid: true,\n          labelAlign: 'right',\n          labelInterpolationFnc: Chartist.noop,\n          scaleMinSpace: 40\n        },\n        width: undefined,\n        height: undefined,\n        chartPadding: 5,\n        seriesBarDistance: 15,\n        classNames: {\n          label: 'ct-label',\n          series: 'ct-series',\n          bar: 'ct-bar',\n          thin: 'ct-thin',\n          thick: 'ct-thick',\n          grid: 'ct-grid',\n          vertical: 'ct-vertical',\n          horizontal: 'ct-horizontal'\n        }\n      },\n      currentOptions,\n      paper,\n      dataArray = Chartist.normalizeDataArray(Chartist.getDataArray(data), data.labels.length);\n\n    function createChart(options) {\n      var xAxisOffset,\n        yAxisOffset,\n        seriesGroups = [],\n        bounds;\n\n      // Create new paper the stage\n      paper = Chartist.createPaper(query, options.width, options.height);\n\n      // initialize bounds\n      bounds = Chartist.getBounds(paper, dataArray, options, null, 0);\n\n      xAxisOffset = options.axisX.offset;\n      if (options.axisX.showLabel) {\n        xAxisOffset += Chartist.calculateLabelOffset(\n          paper,\n          data.labels,\n          [options.classNames.label, options.classNames.horizontal].join(' '),\n          options.axisX.labelInterpolationFnc,\n          Chartist.getHeight\n        );\n      }\n\n      yAxisOffset = options.axisY.offset;\n      if (options.axisY.showLabel) {\n        yAxisOffset += Chartist.calculateLabelOffset(\n          paper,\n          bounds.values,\n          [options.classNames.label, options.classNames.horizontal].join(' '),\n          options.axisY.labelInterpolationFnc,\n          Chartist.getWidth\n        );\n      }\n\n      var chartRect = Chartist.createChartRect(paper, options, xAxisOffset, yAxisOffset);\n      // Start drawing\n      var labels = paper.g(),\n        grid = paper.g();\n\n      Chartist.createXAxis(paper, chartRect, data, grid, labels, options);\n      Chartist.createYAxis(paper, chartRect, bounds, grid, labels, yAxisOffset, options);\n\n      // Draw the series\n      // initialize series groups\n      for (var i = 0; i < data.series.length; i++) {\n        // Calculating bi-polar value of index for seriesOffset. For i = 0..4 biPol will be -1.5, -0.5, 0.5, 1.5 etc.\n        var biPol = i - (data.series.length - 1) / 2,\n        // Half of the period with between vertical grid lines used to position bars\n          periodHalfWidth = chartRect.width() / data.series[i].data.length / 2;\n\n        seriesGroups[i] = paper.g();\n        // Use series class from series data or if not set generate one\n        seriesGroups[i].node.setAttribute('class', options.classNames.series + ' ' +\n          (data.series[i].className || options.classNames.series + '-' + Chartist.alphaNumerate(i)));\n\n        for(var j = 0; j < data.series[i].data.length; j++) {\n          var p = Chartist.projectPoint(chartRect, bounds, data.series[i].data, j),\n            bar;\n\n          // Offset to center bar between grid lines and using bi-polar offset for multiple series\n          // TODO: Check if we should really be able to add classes to the series. Should be handles with SASS and semantic / specific selectors\n          p.x += periodHalfWidth + (biPol * options.seriesBarDistance);\n\n          bar = paper.line(p.x, chartRect.y1, p.x, p.y);\n          bar.node.setAttribute('class', options.classNames.bar + (data.series[i].barClasses ? ' ' + data.series[i].barClasses : ''));\n          seriesGroups[i].prepend(bar);\n        }\n\n        paper.add(seriesGroups[i]);\n      }\n    }\n\n    // Obtain current options based on matching media queries (if responsive options are given)\n    // This will also register a listener that is re-creating the chart based on media changes\n    currentOptions = Chartist.optionsProvider(defaultOptions, options, responsiveOptions, function (changedOptions) {\n      currentOptions = changedOptions;\n      createChart(currentOptions);\n    });\n\n    // TODO: Currently we need to re-draw the chart on window resize. This is usually very bad and will affect performance.\n    // This is done because we can't work with relative coordinates when drawing the chart because SVG Path does not\n    // work with relative positions yet. We need to check if we can do a viewBox hack to switch to percentage.\n    // See http://mozilla.6506.n7.nabble.com/Specyfing-paths-with-percentages-unit-td247474.html\n    // Update: can be done using the above method tested here: http://codepen.io/gionkunz/pen/KDvLj\n    // The problem is with the label offsets that can't be converted into percentage and affecting the chart container\n    window.addEventListener('resize', function () {\n      createChart(currentOptions);\n    });\n\n    // Public members\n    return {\n      version: Chartist.version,\n      update: function () {\n        createChart(currentOptions);\n      }\n    };\n  };\n}(document, window, window.Chartist));"]}